{"ast":null,"code":"/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n'use strict';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/necolas/OpenSource/github/necolas/react-native-web/packages/examples/pages/lists/examples/SingleColumn.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport Animated from \"react-native-web/dist/cjs/exports/Animated\";\nimport FlatList from \"react-native-web/dist/cjs/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/cjs/exports/StyleSheet\";\nimport View from \"react-native-web/dist/cjs/exports/View\";\nimport { FooterComponent, HeaderComponent, ItemComponent, ItemSeparatorComponent, PlainInput, SeparatorComponent, Spindicator, genItemData, getItemLayout, pressItem, renderSmallSwitchOption } from './shared';\nvar AnimatedFlatList = Animated.createAnimatedComponent(FlatList);\n_c = AnimatedFlatList;\nvar VIEWABILITY_CONFIG = {\n  minimumViewTime: 3000,\n  viewAreaCoveragePercentThreshold: 100,\n  waitForInteraction: true\n};\n\nvar SingleColumnExample = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(SingleColumnExample, _React$PureComponent);\n\n  var _super = _createSuper(SingleColumnExample);\n\n  function SingleColumnExample() {\n    var _this;\n\n    _classCallCheck(this, SingleColumnExample);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      data: genItemData(100),\n      debug: false,\n      horizontal: false,\n      inverted: false,\n      filterText: '',\n      fixedHeight: true,\n      logViewable: false,\n      virtualized: true\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onChangeFilterText\", function (filterText) {\n      _this.setState({\n        filterText: filterText\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onChangeScrollToIndex\", function (text) {\n      _this._listRef.getNode().scrollToIndex({\n        viewPosition: 0.5,\n        index: Number(text)\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_scrollPos\", new Animated.Value(0));\n\n    _defineProperty(_assertThisInitialized(_this), \"_scrollSinkX\", Animated.event([{\n      nativeEvent: {\n        contentOffset: {\n          x: _this._scrollPos\n        }\n      }\n    }], {\n      useNativeDriver: true\n    }));\n\n    _defineProperty(_assertThisInitialized(_this), \"_scrollSinkY\", Animated.event([{\n      nativeEvent: {\n        contentOffset: {\n          y: _this._scrollPos\n        }\n      }\n    }], {\n      useNativeDriver: true\n    }));\n\n    _defineProperty(_assertThisInitialized(_this), \"_captureRef\", function (ref) {\n      _this._listRef = ref;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_getItemLayout\", function (data, index) {\n      return getItemLayout(data, index, _this.state.horizontal);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onEndReached\", function () {\n      if (_this.state.data.length >= 1000) {\n        return;\n      }\n\n      _this.setState(function (state) {\n        return {\n          data: state.data.concat(genItemData(100, state.data.length))\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onRefresh\", function () {\n      return console.log('onRefresh: nothing to refresh :P');\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_renderItemComponent\", function (_ref) {\n      var item = _ref.item,\n          separators = _ref.separators;\n      return /*#__PURE__*/_jsxDEV(ItemComponent, {\n        fixedHeight: _this.state.fixedHeight,\n        horizontal: _this.state.horizontal,\n        item: item,\n        onHideUnderlay: separators.unhighlight,\n        onPress: _this._pressItem,\n        onShowUnderlay: separators.highlight\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 7\n      }, _assertThisInitialized(_this));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onViewableItemsChanged\", function (info) {\n      // Impressions can be logged here\n      if (_this.state.logViewable) {\n        console.log('onViewableItemsChanged: ', info.changed.map(function (v) {\n          return _objectSpread(_objectSpread({}, v), {}, {\n            item: '...'\n          });\n        }));\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_pressItem\", function (key) {\n      _this._listRef.getNode().recordInteraction();\n\n      pressItem(_assertThisInitialized(_this), key);\n    });\n\n    return _this;\n  }\n\n  _createClass(SingleColumnExample, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this._listRef.getNode().recordInteraction(); // e.g. flipping logViewable switch\n\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var filterRegex = new RegExp(String(this.state.filterText), 'i');\n\n      var filter = function filter(item) {\n        return filterRegex.test(item.text) || filterRegex.test(item.title);\n      };\n\n      var filteredData = this.state.data.filter(filter);\n      return /*#__PURE__*/_jsxDEV(View, {\n        style: styles.container,\n        children: [/*#__PURE__*/_jsxDEV(View, {\n          style: styles.searchRow,\n          children: [/*#__PURE__*/_jsxDEV(View, {\n            style: styles.options,\n            children: [/*#__PURE__*/_jsxDEV(PlainInput, {\n              onChangeText: this._onChangeFilterText,\n              placeholder: \"Search...\",\n              value: this.state.filterText\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(PlainInput, {\n              onChangeText: this._onChangeScrollToIndex,\n              placeholder: \"scrollToIndex...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(View, {\n            style: styles.options,\n            children: [renderSmallSwitchOption(this, 'virtualized'), renderSmallSwitchOption(this, 'horizontal'), renderSmallSwitchOption(this, 'fixedHeight'), renderSmallSwitchOption(this, 'logViewable'), renderSmallSwitchOption(this, 'inverted'), renderSmallSwitchOption(this, 'debug'), /*#__PURE__*/_jsxDEV(Spindicator, {\n              value: this._scrollPos\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(SeparatorComponent, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(AnimatedFlatList, {\n          contentContainerStyle: styles.list,\n          data: filteredData,\n          debug: this.state.debug,\n          disableVirtualization: !this.state.virtualized,\n          getItemLayout: this.state.fixedHeight ? this._getItemLayout : undefined,\n          horizontal: this.state.horizontal,\n          inverted: this.state.inverted,\n          ItemSeparatorComponent: ItemSeparatorComponent,\n          keyboardDismissMode: \"on-drag\",\n          keyboardShouldPersistTaps: \"always\",\n          legacyImplementation: false,\n          ListFooterComponent: FooterComponent,\n          ListHeaderComponent: /*#__PURE__*/_jsxDEV(HeaderComponent, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 32\n          }, this),\n          numColumns: 1,\n          onEndReached: this._onEndReached,\n          onRefresh: this._onRefresh,\n          onScroll: this.state.horizontal ? this._scrollSinkX : this._scrollSinkY,\n          onViewableItemsChanged: this._onViewableItemsChanged,\n          ref: this._captureRef,\n          refreshing: false,\n          renderItem: this._renderItemComponent,\n          viewabilityConfig: VIEWABILITY_CONFIG\n        }, (this.state.horizontal ? 'h' : 'v') + (this.state.fixedHeight ? 'f' : 'd'), false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return SingleColumnExample;\n}(React.PureComponent);\n\n_defineProperty(SingleColumnExample, \"title\", '<FlatList>');\n\n_defineProperty(SingleColumnExample, \"description\", 'Performant, scrollable list of data.');\n\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: 'rgb(239, 239, 244)',\n    flex: 1\n  },\n  list: {\n    backgroundColor: 'white'\n  },\n  options: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    alignItems: 'center'\n  },\n  searchRow: {\n    paddingHorizontal: 10\n  }\n});\nexport default function () {\n  return /*#__PURE__*/_jsxDEV(View, {\n    style: {\n      height: 300\n    },\n    children: /*#__PURE__*/_jsxDEV(SingleColumnExample, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 195,\n    columnNumber: 5\n  }, this);\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"AnimatedFlatList\");","map":{"version":3,"sources":["/Users/necolas/OpenSource/github/necolas/react-native-web/packages/examples/pages/lists/examples/SingleColumn.js"],"names":["React","FooterComponent","HeaderComponent","ItemComponent","ItemSeparatorComponent","PlainInput","SeparatorComponent","Spindicator","genItemData","getItemLayout","pressItem","renderSmallSwitchOption","AnimatedFlatList","Animated","createAnimatedComponent","FlatList","VIEWABILITY_CONFIG","minimumViewTime","viewAreaCoveragePercentThreshold","waitForInteraction","SingleColumnExample","data","debug","horizontal","inverted","filterText","fixedHeight","logViewable","virtualized","setState","text","_listRef","getNode","scrollToIndex","viewPosition","index","Number","Value","event","nativeEvent","contentOffset","x","_scrollPos","useNativeDriver","y","ref","state","length","concat","console","log","item","separators","unhighlight","_pressItem","highlight","info","changed","map","v","key","recordInteraction","filterRegex","RegExp","String","filter","test","title","filteredData","styles","container","searchRow","options","_onChangeFilterText","_onChangeScrollToIndex","list","_getItemLayout","undefined","_onEndReached","_onRefresh","_scrollSinkX","_scrollSinkY","_onViewableItemsChanged","_captureRef","_renderItemComponent","PureComponent","StyleSheet","create","backgroundColor","flex","flexDirection","flexWrap","alignItems","paddingHorizontal","height"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @noflow\n */\n'use strict';\n\nimport React from 'react';\nimport { Animated, FlatList, StyleSheet, View } from 'react-native';\n\nimport {\n  FooterComponent,\n  HeaderComponent,\n  ItemComponent,\n  ItemSeparatorComponent,\n  PlainInput,\n  SeparatorComponent,\n  Spindicator,\n  genItemData,\n  getItemLayout,\n  pressItem,\n  renderSmallSwitchOption\n} from './shared';\n\nconst AnimatedFlatList = Animated.createAnimatedComponent(FlatList);\n\nconst VIEWABILITY_CONFIG = {\n  minimumViewTime: 3000,\n  viewAreaCoveragePercentThreshold: 100,\n  waitForInteraction: true\n};\n\nclass SingleColumnExample extends React.PureComponent {\n  static title = '<FlatList>';\n  static description = 'Performant, scrollable list of data.';\n\n  state = {\n    data: genItemData(100),\n    debug: false,\n    horizontal: false,\n    inverted: false,\n    filterText: '',\n    fixedHeight: true,\n    logViewable: false,\n    virtualized: true\n  };\n\n  _onChangeFilterText = filterText => {\n    this.setState({ filterText });\n  };\n\n  _onChangeScrollToIndex = text => {\n    this._listRef.getNode().scrollToIndex({ viewPosition: 0.5, index: Number(text) });\n  };\n\n  _scrollPos = new Animated.Value(0);\n  _scrollSinkX = Animated.event([{ nativeEvent: { contentOffset: { x: this._scrollPos } } }], {\n    useNativeDriver: true\n  });\n  _scrollSinkY = Animated.event([{ nativeEvent: { contentOffset: { y: this._scrollPos } } }], {\n    useNativeDriver: true\n  });\n\n  componentDidUpdate() {\n    this._listRef.getNode().recordInteraction(); // e.g. flipping logViewable switch\n  }\n\n  render() {\n    const filterRegex = new RegExp(String(this.state.filterText), 'i');\n    const filter = item => filterRegex.test(item.text) || filterRegex.test(item.title);\n    const filteredData = this.state.data.filter(filter);\n    return (\n      <View style={styles.container}>\n        <View style={styles.searchRow}>\n          <View style={styles.options}>\n            <PlainInput\n              onChangeText={this._onChangeFilterText}\n              placeholder=\"Search...\"\n              value={this.state.filterText}\n            />\n            <PlainInput onChangeText={this._onChangeScrollToIndex} placeholder=\"scrollToIndex...\" />\n          </View>\n          <View style={styles.options}>\n            {renderSmallSwitchOption(this, 'virtualized')}\n            {renderSmallSwitchOption(this, 'horizontal')}\n            {renderSmallSwitchOption(this, 'fixedHeight')}\n            {renderSmallSwitchOption(this, 'logViewable')}\n            {renderSmallSwitchOption(this, 'inverted')}\n            {renderSmallSwitchOption(this, 'debug')}\n            <Spindicator value={this._scrollPos} />\n          </View>\n        </View>\n        <SeparatorComponent />\n        <AnimatedFlatList\n          contentContainerStyle={styles.list}\n          data={filteredData}\n          debug={this.state.debug}\n          disableVirtualization={!this.state.virtualized}\n          getItemLayout={this.state.fixedHeight ? this._getItemLayout : undefined}\n          horizontal={this.state.horizontal}\n          inverted={this.state.inverted}\n          ItemSeparatorComponent={ItemSeparatorComponent}\n          key={(this.state.horizontal ? 'h' : 'v') + (this.state.fixedHeight ? 'f' : 'd')}\n          keyboardDismissMode=\"on-drag\"\n          keyboardShouldPersistTaps=\"always\"\n          legacyImplementation={false}\n          ListFooterComponent={FooterComponent}\n          ListHeaderComponent={<HeaderComponent />}\n          numColumns={1}\n          onEndReached={this._onEndReached}\n          onRefresh={this._onRefresh}\n          onScroll={this.state.horizontal ? this._scrollSinkX : this._scrollSinkY}\n          onViewableItemsChanged={this._onViewableItemsChanged}\n          ref={this._captureRef}\n          refreshing={false}\n          renderItem={this._renderItemComponent}\n          viewabilityConfig={VIEWABILITY_CONFIG}\n        />\n      </View>\n    );\n  }\n  _captureRef = ref => {\n    this._listRef = ref;\n  };\n  _getItemLayout = (data: any, index: number) => {\n    return getItemLayout(data, index, this.state.horizontal);\n  };\n  _onEndReached = () => {\n    if (this.state.data.length >= 1000) {\n      return;\n    }\n    this.setState(state => ({\n      data: state.data.concat(genItemData(100, state.data.length))\n    }));\n  };\n  _onRefresh = () => console.log('onRefresh: nothing to refresh :P');\n  _renderItemComponent = ({ item, separators }) => {\n    return (\n      <ItemComponent\n        fixedHeight={this.state.fixedHeight}\n        horizontal={this.state.horizontal}\n        item={item}\n        onHideUnderlay={separators.unhighlight}\n        onPress={this._pressItem}\n        onShowUnderlay={separators.highlight}\n      />\n    );\n  };\n  // This is called when items change viewability by scrolling into or out of\n  // the viewable area.\n  _onViewableItemsChanged = (info: {\n    changed: Array<{\n      key: string,\n      isViewable: boolean,\n      item: any,\n      index: ?number,\n      section?: any\n    }>\n  }) => {\n    // Impressions can be logged here\n    if (this.state.logViewable) {\n      console.log('onViewableItemsChanged: ', info.changed.map(v => ({ ...v, item: '...' })));\n    }\n  };\n  _pressItem = (key: string) => {\n    this._listRef.getNode().recordInteraction();\n    pressItem(this, key);\n  };\n  _listRef: AnimatedFlatList;\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: 'rgb(239, 239, 244)',\n    flex: 1\n  },\n  list: {\n    backgroundColor: 'white'\n  },\n  options: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    alignItems: 'center'\n  },\n  searchRow: {\n    paddingHorizontal: 10\n  }\n});\n\nexport default function() {\n  return (\n    <View style={{ height: 300 }}>\n      <SingleColumnExample />\n    </View>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}